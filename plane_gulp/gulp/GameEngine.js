var GameEngine={ele:null,allBullets:[],allEnemys:[],totalscore:0,init:function(){this.ele=document.getElementById("main")},star:function(){console.log("游戏开始"),this.loadding(function(){console.log("加载完毕，进入主页面");var e=document.createElement("div");e.className="score",GameEngine.ele.appendChild(e),Myself.init(),Myself.moving(),Myself.fire(),GameEngine.keybord(),GameEngine.createEnemy(),GameEngine.crash(),GameEngine.movebg()})},loadding:function(e){var n=document.createElement("div");GameEngine.ele.appendChild(n),n.className="logo";var l=document.createElement("div");GameEngine.ele.appendChild(l),l.className="load";var t=0,a=setInterval(function(){++t<6?l.style.backgroundImage="url(images/loading"+(t%3+1)+".png)":(clearInterval(a),GameEngine.ele.removeChild(n),GameEngine.ele.removeChild(l),e&&e())},500)},keybord:function(){var e=0,n=0;window.onkeydown=function(l){37==(l=l||event).keyCode?e=-10:38==l.keyCode?n=-10:39==l.keyCode?e=10:40==l.keyCode&&(n=10)},window.onkeyup=function(l){37!=(l=l||event).keyCode&&39!=l.keyCode||(e=0),38!=l.keyCode&&40!=l.keyCode||(n=0)},setInterval(function(){var l=Myself.ele.offsetLeft+e;l<0&&(l=0),l>GameEngine.ele.offsetWidth-Myself.ele.offsetWidth&&(l=GameEngine.ele.offsetWidth-Myself.ele.offsetWidth-1),Myself.ele.style.top=Myself.ele.offsetTop+n+"px",Myself.ele.style.left=l+"px"},30)},createEnemy:function(){setInterval(function(){if(Math.random()>.5){var e=new Enemy(Enemy.prototype.Enemy_type_large);e.init(),e.move()}},4e3),setInterval(function(){if(Math.random()>.5){var e=new Enemy(Enemy.prototype.Enemy_type_middle);e.init(),e.move()}},2e3),setInterval(function(){var e=new Enemy(Enemy.prototype.Enemy_type_small);e.init(),e.move()},1500)},crash:function(){var e=setInterval(function(){for(var n=0;n<GameEngine.allEnemys.length;n++){for(var l=0;l<GameEngine.allBullets.length;l++)isCrash(GameEngine.allEnemys[n].ele,GameEngine.allBullets[l].ele)&&(GameEngine.allBullets[l].boom(),GameEngine.allBullets.splice(l,1),GameEngine.allEnemys[n].hurt());if(isCrash(GameEngine.allEnemys[n].ele,Myself.ele)){clearInterval(e),Myself.boom(function(){var e=prompt("请留下您的大名,您当前的分数是"+GameEngine.totalscore);ajax({type:"post",url:"http://60.205.181.47/myPHPCode4/uploadScore.php",data:{name:e,score:GameEngine.totalscore},success:function(e){console.log("提交成功: "+e),location.href="Phangbang.html"}})});break}}},30)},movebg:function(){var e=0;setInterval(function(){GameEngine.ele.style.backgroundPositionY=e+++"px"},50)}};