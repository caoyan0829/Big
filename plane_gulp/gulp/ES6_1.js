"use strict";var GameEngine={ele:null,allBullets:[],allEnemys:[],totalscore:0,init:function(){this.ele=document.getElementById("main")},star:function(){console.log("游戏开始"),this.loadding(function(){console.log("加载完毕，进入主页面");var e=document.createElement("div");e.className="score",GameEngine.ele.appendChild(e),Plane().init(),Plane().moving(),Plane().fire(),GameEngine.keybord(),GameEngine.createEnemy(),GameEngine.crash(),GameEngine.movebg()})},loadding:function(e){var n=document.createElement("div");GameEngine.ele.appendChild(n),n.className="logo";var a=document.createElement("div");GameEngine.ele.appendChild(a),a.className="load";var l=0,t=setInterval(function(){++l<6?a.style.backgroundImage="url(images/loading"+(l%3+1)+".png)":(clearInterval(t),GameEngine.ele.removeChild(n),GameEngine.ele.removeChild(a),e&&e())},500)},keybord:function(){var e=0,n=0;window.onkeydown=function(a){37==(a=a||event).keyCode?e=-10:38==a.keyCode?n=-10:39==a.keyCode?e=10:40==a.keyCode&&(n=10)},window.onkeyup=function(a){37!=(a=a||event).keyCode&&39!=a.keyCode||(e=0),38!=a.keyCode&&40!=a.keyCode||(n=0)},setInterval(function(){var a=Plane().ele.offsetLeft+e;a<0&&(a=0),a>GameEngine.ele.offsetWidth-Plane().ele.offsetWidth&&(a=GameEngine.ele.offsetWidth-Plane().ele.offsetWidth-1),Plane().ele.style.top=Plane().ele.offsetTop+n+"px",Plane().ele.style.left=a+"px"},30)},createEnemy:function(){setInterval(function(){if(Math.random()>.5){var e=new Enemy(Enemy.prototype.Enemy_type_large);e.init(),e.move()}},4e3),setInterval(function(){if(Math.random()>.5){var e=new Enemy(Enemy.prototype.Enemy_type_middle);e.init(),e.move()}},2e3),setInterval(function(){var e=new Enemy(Enemy.prototype.Enemy_type_small);e.init(),e.move()},1500)},crash:function(){var e=setInterval(function(){for(var n=0;n<GameEngine.allEnemys.length;n++){for(var a=0;a<GameEngine.allBullets.length;a++)isCrash(GameEngine.allEnemys[n].ele,GameEngine.allBullets[a].ele)&&(GameEngine.allBullets[a].boom(),GameEngine.allBullets.splice(a,1),GameEngine.allEnemys[n].hurt());if(isCrash(GameEngine.allEnemys[n].ele,Plane().ele)){clearInterval(e),Plane().boom(function(){var e=prompt("请留下您的大名,您当前的分数是"+GameEngine.totalscore);ajax({type:"post",url:"http://60.205.181.47/myPHPCode4/uploadScore.php",data:{name:e,score:GameEngine.totalscore},success:function(e){console.log("提交成功: "+e),location.href="Phangbang.html"}})});break}}},30)},movebg:function(){var e=0;setInterval(function(){GameEngine.ele.style.backgroundPositionY=e+++"px"},50)}};